---
layout: default
title: National Investment Budget
---

<h2 class="page-header">National Investment Budget</h2>

<script src="js/bubblemap.js"></script>
<script type="text/javascript">
(function ($) {
  yepnope.errorTimeout = 1000;
  yepnope([
   { load: OpenSpending.getBubbleMapDependencies('{{site.openspendingjs}}'),
     complete: function() {
        var bubblemap = new OpenSpending.BubbleMap({
          query: {
            dataset: 'cm-pib',
            cuts: ['year:2011'],
            drilldowns: ['sector', 'chapter'],
            breakdown: 'region',
            rootNodeLabel: 'Total (2011)'
          },
          map: {
            url: 'img/regions.svg',
            layerName: 'region',
            keyAttribute: 'region'
          },
          table: {
            columns: [
              {
                  name: 'chapter',
                  label: 'Chapter',
                  width: '20%',
                  data: function(d) { return d.chapter.label; }
              },
              {
                  name: 'libelle-activite-fr',
                  label: 'Activity',
                  width: '48%',
                  data: function(d) { return d['libelle-activite-fr']; }
              },
              {
                  name: 'localite',
                  label: 'Location',
                  width: '20%',
                  data: function(d) { return d.localite; }
              },
              {
                  name: 'amount',
                  label: 'Amount (Fr)',
                  width: '8%',
                  data: function(d) { return OpenSpending.Utils.formatAmountWithCommas(d.amount||0); }
              },
              {
                  name: 'details',
                  label: '',
                  width: '2%',
                  data: function(d) { return '<a href="'+d.html_url+'">&raquo;</a>'; }
              }
            ]
          }
        });
    }
   }
  ]); // yepnope()   
})(jQuery)
</script>
    
{% include bubblemap.html %}
