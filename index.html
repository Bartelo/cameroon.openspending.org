---
layout: default
title: Cameroon
section: home
---


<style type="text/css">
    #map{
        margin: 0 0 20px 0;
    }

    #map svg .region {
        stroke: #fff;
        stroke-opacity: 1;
    }

    #map svg .region:hover {
        stroke: #fff;
    }
    #map .instruction{
        position:relative;
        font-size:12px;
        left:30px;
        color:#999;
    }

    .intro-container {
        font-size: 17px;
        line-height: 22px;
        color: #666;
        font-family: "OpenSansItalic";
        padding-left:30px;
        padding-bottom: 17px;
        margin: 6px 0 18px 0;

        border-bottom: 1px solid #efefef;


    }
    .intro-text {
        width:540px;
    }

    #call-to-action {
        float:right;
    }

    #call-to-action a {
        color: #fff;
        padding: 10px 10px 10px 35px;
        background: #c0c0c0 url('img/site/white_star.png') no-repeat 10px 10px;
        display: block;
        font-family: "OpenSansBold", Helvetica, sans-serif;
        font-size: 1.1em;

    }

    #call-to-action a:hover {
        background-color: #999;
        text-decoration: none;
    }

    #budget-data{
        background-color: #f8f8f8;
        padding-bottom: 12px;

    }
    #region-panel p{
        padding:4px 16px 4px 16px;
        color: #666666;
        font-size: 14px;

    }
    .budget-list{
          list-style-type:none;
    }

    .budget-list li{
        margin-top: 16px;
        margin-bottom: 16px;
    }
    .budget-inline li{
        display: inline;
        padding-right:4px;
        line-height:36px;
        /*vertical-align: top;*/
    }



    .budget-link{
        font-size: 16px;/*10.998px;*/
        font-weight: bold;
        line-height: 16px; /*14px;*/
        color: #ffffff;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
        white-space: nowrap;
        vertical-align: baseline;
        background-color: #999999;
        padding: 3px 25px 4px 8px; /*1px 4px 2px;*/
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
        background: transparent url('img/site/button_arrow_white.png') no-repeat right center;
    }

    a.budget-link:hover {
        color: #ffffff;
        text-decoration: none;
        cursor: pointer;
    }

    .national-budget-link {
        background-color:
            #199a7b;
    }
    .national-budget-link:hover {
        background-color:
            #007a5e;
    }


    .regional-budget-link {
        background-color:
            #df3e67;
    }
    .regional-budget-link:hover {
        background-color:
            #de2c39;
    }
    .council-budget-link {
          background-color:
              #f95611;
    }
    .council-budget-link:hover {
        background-color:
            #e13506
;
    }
    .question-budget-link {
        padding: 1px 4px 2px;
        background-color:
            #475e58;
    }

    #budget-questions{
        list-style-type:none;

    }

    #budget-questions h3{
        color: #666666;
    }
    #budget-questions h3 a{
        padding-left:8px;
        color: #666666;

    }
    #budget-questions h3 a:hover {
        color: #999;
        text-decoration: none;
    }

    h3.panel-label{
        font-size: 16px;
        font-weight: normal;
        border-bottom:1px solid #e7e7e7;
        padding:10px 0 5px 16px;
        margin: 0px 0 16px 0;
    }
    .budget-region{
        font-weight: bold;
    }




</style>

<div id="call-to-action">
    <a href="/contribute.html">Send in your local council data</a>
</div>

<!--<h2 class="page-title">Cameroon Budget Map</h2>-->
<h2 class="intro-container">
    <div class="intro-text">Discover how Cameroon receives and spends its money and see how citizens vote for it to be spent
    </div >
</h2>


<div class="row">
    <div class="span7">
        <div id="map">
            <div class="instruction">
                Click map regions to view budgets
            </div>
        </div>
    </div>
    <div class="span5">

        <div id="budget-data">
            <h3 class="panel-label">National Level:</h3>
            <ul class="budget-list">
                <li><a href="pib.html" id="nib-link" class="budget-link national-budget-link" >National Investment Budget</a>
                </li>
            </ul>

            <h3 class="panel-label">Region: <span id="region-title" class="budget-region"></span></h3>
            <div id="region-panel">
                <p><b>How does my region spend its funds?</b></p>
                <p>Select a region to see budget and survey information related to it.</p>
            </div>

        </div>
    </div>

</div>

<ul id="budget-questions">

    <li><h3><img src="img/site/icon_national_bubble.png">
        <a href="pib.html">What does Cameroon invest in?</a>
        <small>Cameroon</small>
    </h3></li>
    <li><h3><img src="img/site/icon_regional_bubble.png">
        <a href="nwregion.html">What does my region invest in?</a>
        <small>North-West Region</small>
    </h3></li>
    <li><h3><img src="img/site/icon_transparency.png">
        <a href="bti.html">How well do local councils mange their budgets?</a>
        <small>Adamawa Region</small>
    </h3></li>


    <li><h3><img src="img/site/icon_council_bubble.png">
        <a href="tignere_council.html">How does my council spend its money?</a>
        <small>Tignere, Adamawa</small>
    </h3></li>


</ul>



<script>
    $(function() {
        var selectedRegion = null;
        //var sidebarTemplate = Handlebars.compile($('#region-sidebar').html());

        $.ajax({
            url: '/data/main_map.json',
            dataType: 'json',
            contentType: "application/x-www-form-urlencoded;charset=uft-8",
            error: function (jqXHR, textStatus, errorThrown){
                console.log(errorThrown);
            },
            success: function(map_data) {

                window.map = $K.map('#map',500,350);

                var showData = function(region) {
                    /*
                    var data = _.groupBy(
                            _.filter(datasets, function(ds) {
                                return !ds.region||ds.region==region;
                            }),
                        function(e) { return e.level; });
                    data.regionLabel = region;
                    console.log(data);
                    $('#sidebar').html(sidebarTemplate(data));
                    */
                    var regionData = map_data[region];


                    $("#region-title").text(region);

                    $("#region-panel").empty();
                    if(regionData){
                        var $regionList = $('<ul class="budget-list"></ul>');
                        var $councilTitle = $('<h3 id="councils-title" class="panel-label">Councils:</h3>');
                        var $councilList = $('<ul class="budget-list budget-inline"></ul>');
                        var nRegionLinks = 0;
                        var nCouncilLinks = 0;
                        for(var key in regionData){
                            var obj = regionData[key];
                            var budgetCode = obj.budget;
                            var link = "/"+obj.link;
                            switch(budgetCode){

                                case "regional":
                                    $regionList.append('<li><a href="'+link+'" id="rib-link" class="budget-link regional-budget-link">Regional Investment Budget</a></li>');
                                    nRegionLinks+=1;
                                    break;

                                case "transparency":
                                    $regionList.append('<li><a href="'+link+'" id="bti-link" class="budget-link regional-budget-link">Budget Transparency Index</a>');
                                    nRegionLinks+=1;
                                    break;
                                case "council":
                                    $councilList.append('<li><a href="'+link+'" class="budget-link council-budget-link">'+obj.council+'</a></li>');
                                    nCouncilLinks +=1;
                                    break;
                            }
                            //console.log("budgetCode " + budgetCode);
                        }
                        if(nRegionLinks>0){
                            $("#region-panel").append($regionList);
                        }
                        if(nCouncilLinks>0){
                            $("#region-panel").append($councilTitle);
                            $("#region-panel").append($councilList);
                        }


                    }
                    else{
                        $("#region-panel").append('<p>No Data available for this region.</p>');
                    }

                }

                var setPathCol = function(path, selected, border){
                    path.realFill = path.svgPath.attrs.fill;
                    path.svgPath.attr({'fill': selected ? '#df3e67':'#199a7b'});//'#cc0033' : '#007a5e'});
                    return path;
                }

                var setRegionCol = function(region, col, border){
                    var path = map.getLayerPath('region', region);
                    return setPathCol(path, col, border);
                }

                var selectRegion= function(region){
                    if(selectedRegion!=null){
                        var path = setRegionCol(selectedRegion, false, false);
                        path.svgPath.attr({'stroke-width': 1});
                    }
                    selectedRegion = region;
                    var path = setRegionCol(selectedRegion, true, true);
                    path.svgPath.attr({'stroke-width': 2});
                }

                // communes.svg adamawa.svg cameroon.svg north_west.svg regions.svg region_communes.svg
                map.loadMap('/img/regions.svg', function(map) {
                    map.loadStyles('/css/map_styles.css', function() {
                        map.addLayer({
                            id: 'region',
                            key: 'region'

                        });

                        var layer = map.getLayer('region');
                        for(var i=0;i<layer.paths.length;i++){
                            var path = layer.paths[i];
                            //setPathCol(path, false, false);
                            path.svgPath.attr({'fill': '#199a7b'});
                            path.svgPath.attr({'stroke-width': 1});
                            path.svgPath.attr({'stroke': '#fff'});
                        }

                        map.tooltips({
                            layer: 'region',
                            content: function(data) {
                                var countStr = "";
                                if(map_data[data]){
                                    countStr = map_data[data].length.toString();
                                }
                                else{
                                    countStr = 'National budget';
                                }

                                //var count = _.filter(datasets, function(ds) {
                                //    return !ds.region||ds.region==data;
                                //}).length;

                                return data + ' (' + countStr + ')';

                            },
                            style: {
                                name: 'dark'
                            }
                        });

                        map.onLayerEvent('click', function(d) {
                            selectRegion(d.region);
                            showData(d.region);
                        });

                        map.onLayerEvent('mouseover', function(d) {
                            setRegionCol(d.region, true, false);
                        });

                        map.onLayerEvent('mouseout', function(d) {
                            if(d.region!=selectedRegion){
                                setRegionCol(d.region, false, false);
                            }
                        });

                    });
                });
            }
        });
    });

</script>